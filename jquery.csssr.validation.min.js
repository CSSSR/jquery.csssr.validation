!function(t){function e(e,a,i){var n=e.data("events")||t._data(e[0]).events,r=n[a],s=i?r.splice(r.delegateCount-1,1)[0]:r.pop();r.splice(i?0:r.delegateCount||0,0,s)}function a(a,i,n){var r=i.split(/\s+/);a.each(function(){for(var a=0;a<r.length;++a){var i=t.trim(r[a]).match(/[^\.]+/i)[0];e(t(this),i,n)}})}function i(e,a){this.element=e,this.options=t.extend(!0,{},t[n].defaults,t[n].globals,s.getDataOptions(e),a),this.init()}t.fn.onFirst=function(e,i){var n=t(this),r="string"==typeof i;if(t.fn.on.apply(n,arguments),"object"==typeof e)for(var s in e)e.hasOwnProperty(s)&&a(n,s,r);else"string"==typeof e&&a(n,e,r);return n};var n="csssrValidation",r=["valid-class","invalid-class","valid-textarea-class","invalid-textarea-class","valid-select-class","invalid-select-class","valid-class-target","invalid-class-target","valid-textarea-class-target","invalid-textarea-class-target","valid-select-class-target","invalid-select-class-target","required-selector","numeric-selector","inputmode-selector","allow-empty-selector","pattern-attribute","input-pattern-attribute","inputmode-attribute","minlength-attribute","maxlength-attribute","min-attribute","max-attribute","remove-invalid-class-on","validate-fields-on"];t[n]=t[n]||{},t[n].defaults={requiredSelector:"[required], .js-required",requiredPreCheck:!1,numericSelector:'[inputmode="numeric"]',inputmodeSelector:"input[inputmode], input[data-input-pattern], textarea[data-input-pattern]",allowEmptySelector:"[data-allow-empty]",minMaxSelector:"input[min], input[max]",patternAttribute:"pattern",inputPatternAttribute:"data-input-pattern",inputmodeAttribute:"inputmode",minlengthAttribute:"minlength",maxlengthAttribute:"maxlength",minAttribute:"min",maxAttribute:"max",removeInvalidClassOn:"focus",validateFieldsOn:!1,masks:{numbered:{has:function(t){return t.hasClass("numbered")},valid:function(t){return!t.hasClass("numbered_error")}},inputmask:{selector:"[data-inputmask]",has:function(t){return t.inputmask("getemptymask").length},valid:function(t){return t.inputmask("isComplete")},init:function(t){t.inputmask()}}},patterns:{email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zа-яёії\-0-9]+\.)+[a-zа-яёії]{2,}))$/i,url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/},inputPatterns:{cyrillic:/[а-яёії\s]/i,latin:/[a-z\s]/i,numeric:/[0-9]/,letters:/[a-zа-яёії\s]/i,email:/[a-zа-яёії0-9\.\-_@]/i,phone:/[\+0-9]/}};var s={capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},_onSubmit:function(e){var a=t.data(e.target,n),i=s.validate.apply(a,[]);return i?a.element.trigger("valid"):e.stopImmediatePropagation(),i},_onValidateField:function(){var e=t(this),a=e.closest("form, [data-validation-container]").data(n);s.validate.apply(a,[e])},_onRemoveInvalidClass:function(){var e=t(this),a=e.closest("form, [data-validation-container]").data(n);s.toggleClass(e,!1,a.options.invalidClass,a.options.invalidClassTarget)},_onBlur:function(){var e=t(this),a=e.closest("form, [data-validation-container]").data(n),i=e.filter(a.options.numericSelector).length,r=e.filter(a.options.requiredSelector).length,s=e.attr(a.options.minAttribute),l=e.attr(a.options.maxAttribute);i&&(r||e.val())&&(s>Number(e.val())?e.val(s):l<Number(e.val())&&e.val(l))},_onKeyDown:function(e){var a=t(this),i=a.closest("form, [data-validation-container]").data(n),r=a.filter(i.options.numericSelector).length;!r||-1!==t.inArray(e.keyCode,[46,8,9,27,13,110])||65===e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},_onKeyPress:function(e){var a=t(this),i=a.closest("form, [data-validation-container]").data(n),r=s.getMask(a,i.options.masks),l=r?!1:s.getPattern.apply(i,[a,i.options.inputmodeAttribute,i.options.inputPatternAttribute,i.options.inputPatterns]),o=a.attr(i.options.maxlengthAttribute)||Number.POSITIVE_INFINITY,u=e.key||String.fromCharCode(e.which||e.keyCode);return a.val().length<=o&&(!l.length||s.matchesPatterns(u,l))},getDataOptions:function(e){var a={};return t.each(r,function(i,n){var r=e.data(n);void 0!==r&&(a[t.camelCase(n)]=r)}),a},getMask:function(e,a){for(var i in a)if(a.hasOwnProperty(i)&&void 0!==t.fn[i]&&(mask=a[i]).has(e))return mask;return!1},getPattern:function(e,a,i,n){var r=e.attr(a),s=e.attr(i),l=[],o=r?r.split(","):[];return s&&l.push(new RegExp(s)),t.each(o,function(t,e){var a="!"===e[0];void 0!==n[a?e.slice(1):e]&&l.push(a?function(t){return a===(null===t.match(new RegExp(n[e.slice(1)])))}:new RegExp(n[e]))}),l},toggleClass:function(t,e,a,i){if(a)if(i){var n=i.split("/");t[n[0]](n[1]).toggleClass(a,e)}else t.toggleClass(a,e)},matchesPatterns:function(e,a){var i=!0;return t.each(a,function(a,n){i=i&&(t.isFunction(n)?n(e):null!==e.match(n))}),i},validate:function(e){var a=this,i=t.extend(!0,{},a.options,t[n].globals||{}),r=t.grep([i.requiredSelector||"",i.numericSelector||"",i.minMaxSelector||"",i.inputmodeSelector||""],function(t){return""!==t}).join(","),l=!0;return e=e?e.filter(r):a.element.find(r),i.requiredPreCheck&&(e=e.filter(i.requiredPreCheck)),e.each(function(){var e=t(this),n=s.getDataOptions(e),r=s.getMask(e,i.masks),o=r?!1:s.getPattern.apply(a,[e,"type",i.patternAttribute,i.patterns]),u=e.filter(i.allowEmptySelector).length||!e.filter(i.requiredSelector).length,d=e.attr(i.maxlengthAttribute)||Number.POSITIVE_INFINITY,c=e.attr(i.minlengthAttribute)||0,m=e.val().length,p=e.filter(i.numericSelector).length,v=e.attr(i.minAttribute),g=e.attr(i.maxAttribute),f=e.data("equal-to"),h=(u&&!e.val()||r&&r.valid(e)||o.length&&s.matchesPatterns(e.val(),o)||!r&&!o.length&&m>0)&&m>=Number(c)&&m<=Number(d)&&(!p||(void 0===v||Number(v)<=Number(e.val()))&&(void 0===g||Number(g)>=Number(e.val())));h&&f&&(h=t(f).val()===e.val()),s.toggleClass(e,!h,n.invalidClass||i["invalid"+s.capitalize(e[0].tagName.toLowerCase())+"Class"]||i.invalidClass,n.invalidClassTarget||i["invalid"+s.capitalize(e[0].tagName.toLowerCase())+"ClassTarget"]||i.invalidClassTarget),s.toggleClass(e,h,n.validClass||i["valid"+s.capitalize(e[0].tagName.toLowerCase())+"Class"]||i.validClass,n.validClassTarget||i["valid"+s.capitalize(e[0].tagName.toLowerCase())+"ClassTarget"]||i.validClassTarget),l=l&&h}),l}};i.prototype={init:function(){var e=this;e.element.on("keydown",e.options.numericSelector,s._onKeyDown),e.element.on("keypress",e.options.inputmodeSelector,s._onKeyPress),e.element.on("blur",e.options.minMaxSelector,s._onBlur),e.element.attr("novalidate",!0).onFirst("submit validate.csssr",s._onSubmit),e.options.removeInvalidClassOn&&e.element.on(e.options.removeInvalidClassOn,"input, textarea",s._onRemoveInvalidClass),e.options.validateFieldsOn&&e.element.on(e.options.validateFieldsOn,"input, textarea",s._onValidateField),t.each(e.options.masks,function(a,i){i.selector&&void 0!==t.fn[a]&&i.init(e.element.find(i.selector))})},destroy:function(){this.element.off("submit."+n+" validate.csssr",s._onSubmit).removeData(n)}},t.fn[n]=function(e){var a=arguments;return this.each(function(){var r=t.data(this,n);if(r)return e&&e.substring&&r[e].apply(r,[].splice.call(a,1)),!0;if(e&&e.substring)throw new Error(n+" not available for this DOM element!");return r=t(this),r.data(n,new i(r,e)),!0})},t("body").onFirst("submit","form[data-validate]:not([novalidate])",function(e){e.preventDefault(),e.stopImmediatePropagation(),t(this).csssrValidation().submit()}),t("body").onFirst("validate.csssr","[data-validation-container]:not([novalidate])",function(e){e.preventDefault(),e.stopImmediatePropagation(),t(this).csssrValidation().trigger("validate.csssr")}),t("body").on("click","[data-validation-trigger]",function(){t(this).closest("[data-validation-container]").trigger("validate.csssr")}),t("form[data-validate]:not([novalidate]), [data-validation-container]:not([novalidate])").csssrValidation()}(jQuery);